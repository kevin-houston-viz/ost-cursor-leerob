<mat-toolbar color="primary">
  <span>Ostly - Opportunity Solution Trees</span>
  <span class="spacer"></span>
  <button mat-icon-button (click)="toggleTheme()" matTooltip="Toggle Dark/Light Mode">
    <mat-icon>brightness_6</mat-icon>
  </button>
</mat-toolbar>

<div class="dashboard-container">
  <div class="header">
    <h1>My OSTs</h1>
    <button mat-raised-button color="primary" (click)="createNewTree()">
      <mat-icon>add</mat-icon>
      Create New OST
    </button>
  </div>

  @if (loading()) {
    <div class="loading">Loading your OSTs...</div>
  } @else if (trees().length === 0) {
    <div class="empty-state">
      <mat-icon class="empty-icon">account_tree</mat-icon>
      <h2>No OSTs Yet</h2>
      <p>Create your first Opportunity Solution Tree to get started!</p>
      <button mat-raised-button color="primary" (click)="createNewTree()">
        <mat-icon>add</mat-icon>
        Create Your First OST
      </button>
    </div>
  } @else {
    <div class="trees-grid">
      @for (tree of trees(); track tree.id) {
        <mat-card class="tree-card" (click)="openTree(tree.id)">
          <mat-card-header>
            <mat-card-title>{{ tree.title }}</mat-card-title>
            <div class="card-actions">
              <button 
                mat-icon-button 
                class="edit-button"
                (click)="editTree(tree, $event)"
                matTooltip="Edit OST Details"
              >
                <mat-icon>edit</mat-icon>
              </button>
              <button 
                mat-icon-button 
                class="delete-button"
                (click)="deleteTree(tree, $event)"
                matTooltip="Delete OST"
              >
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </mat-card-header>
          <mat-card-content>
            @if (tree.description) {
              <p class="description">{{ tree.description }}</p>
            } @else {
              <p class="description empty">No description</p>
            }
            <div class="metadata">
              <span class="date">
                <mat-icon class="date-icon">schedule</mat-icon>
                Last updated: {{ formatDate(tree.updated_at) }}
              </span>
            </div>
          </mat-card-content>
        </mat-card>
      }
    </div>
  }
</div>

