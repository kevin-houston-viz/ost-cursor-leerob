<h2 mat-dialog-title>Edit Node</h2>

<form [formGroup]="nodeForm" (ngSubmit)="onSave()">
  <mat-dialog-content>
    <!-- Node Type (Read-only) -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Node Type</mat-label>
      <input matInput [value]="getNodeTypeLabel(data.node.node_type)" readonly />
    </mat-form-field>

    <!-- Title -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Title</mat-label>
      <input matInput formControlName="title" placeholder="Enter node title" required />
      @if (nodeForm.get('title')?.hasError('required')) {
        <mat-error>Title is required</mat-error>
      }
      @if (nodeForm.get('title')?.hasError('maxlength')) {
        <mat-error>Title must be less than 255 characters</mat-error>
      }
    </mat-form-field>

    <!-- Description -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Description</mat-label>
      <textarea 
        matInput 
        formControlName="description" 
        placeholder="Enter node description"
        rows="4"
      ></textarea>
      @if (nodeForm.get('description')?.hasError('maxlength')) {
        <mat-error>Description must be less than 1000 characters</mat-error>
      }
    </mat-form-field>

    <!-- Status -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Status</mat-label>
      <mat-select formControlName="status">
        @for (status of nodeStatuses; track status) {
          <mat-option [value]="status">
            {{ getStatusLabel(status) }}
          </mat-option>
        }
      </mat-select>
    </mat-form-field>
  </mat-dialog-content>

  <mat-dialog-actions>
    <button mat-button type="button" (click)="onDelete()" color="warn" class="delete-button">
      <mat-icon>delete</mat-icon>
      Delete
    </button>
    <span class="spacer"></span>
    <button mat-button type="button" (click)="onCancel()">Cancel</button>
    <button 
      mat-raised-button 
      color="primary" 
      type="submit"
      [disabled]="!nodeForm.valid"
    >
      Save
    </button>
  </mat-dialog-actions>
</form>
